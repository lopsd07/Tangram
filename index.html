<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片展示与计时</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding-top: 130px; /* 为固定控制面板预留空间 */
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .fixed-control-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: white;
            padding: 15px 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            font-weight: 500;
        }
        
        button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button#stopBtn {
            background-color: #f44336;
        }
        
        button#stopBtn:hover {
            background-color: #e53935;
        }
        
        .timer-display {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            padding: 10px 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            min-width: 150px;
            text-align: center;
        }
        
        .used-time {
            font-size: 1.2rem;
            color: #4CAF50;
            padding: 10px 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            display: none;
        }
        
        .image-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .thumbnail {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .thumbnail:hover {
            transform: scale(1.03);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .fullscreen-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 999; /* 低于控制面板 */
            flex-direction: column;
            padding: 20px;
        }
        
        .fullscreen-image {
            max-width: 90%;
            max-height: 80%;
            object-fit: contain;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            cursor: pointer;
        }
        
        .fullscreen-timer {
            color: white;
            font-size: 2.5rem;
            margin-top: 20px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .game-result {
            color: white;
            font-size: 1.8rem;
            margin-top: 20px;
            text-align: center;
            max-width: 80%;
            line-height: 1.4;
        }
        
        .restart-hint {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.2rem;
            margin-top: 10px;
            text-align: center;
            animation: pulse 2s infinite;
        }
        
        .exit-hint {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
            margin-top: 15px;
            text-align: center;
        }
        
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }
        
        @media (max-width: 768px) {
            body {
                padding-top: 150px; /* 移动端增加顶部空间 */
            }
            
            .image-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .thumbnail {
                height: 120px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .timer-display {
                font-size: 1.6rem;
            }
            
            .fullscreen-timer {
                font-size: 2rem;
            }
            
            .game-result {
                font-size: 1.5rem;
            }
            
            .fixed-control-panel {
                padding: 10px 15px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding-top: 160px; /* 小屏幕设备增加更多顶部空间 */
            }
            
            .image-container {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .thumbnail {
                height: 100px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            button {
                padding: 10px 20px;
                font-size: 1rem;
            }
            
            .timer-display {
                font-size: 1.4rem;
                min-width: 120px;
            }
            
            .fixed-control-panel {
                flex-direction: column;
                gap: 10px;
            }
            
            .game-result {
                font-size: 1.3rem;
            }
            
            .restart-hint {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="fixed-control-panel">
        <button id="startBtn">开始</button>
        <div class="timer-display" id="timerDisplay">60秒</div>
        <div class="used-time" id="usedTime">使用时间: 0秒</div>
    </div>
    
    <div class="container">
        <header>
            <h1>神奇七巧板</h1>
            <p>测试你的观察力与反应速度</p>
        </header>
        
        <div class="image-container" id="imageContainer">
            <!-- 图片将通过JavaScript动态加载 -->
        </div>
        
        <div class="fullscreen-overlay" id="fullscreenOverlay">
            <img class="fullscreen-image" id="fullscreenImage" src="" alt="全屏图片">
            <div class="fullscreen-timer" id="fullscreenTimer">60秒</div>
            <div class="game-result" id="gameResult"></div>
            <div class="restart-hint" id="restartHint"></div>
            <div class="exit-hint" id="exitHint"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const imageContainer = document.getElementById('imageContainer');
            const startBtn = document.getElementById('startBtn');
            const timerDisplay = document.getElementById('timerDisplay');
            const fullscreenOverlay = document.getElementById('fullscreenOverlay');
            const fullscreenImage = document.getElementById('fullscreenImage');
            const fullscreenTimer = document.getElementById('fullscreenTimer');
            const usedTime = document.getElementById('usedTime');
            const gameResult = document.getElementById('gameResult');
            const restartHint = document.getElementById('restartHint');
            const exitHint = document.getElementById('exitHint');
            
            let countdown;
            let secondsLeft;
            let startTime;
            let gameActive = false;
            let gameEnded = false;
            let currentImageSrc = '';
            
            // 生成图片缩略图
            for (let i = 1; i <= 40; i++) {
                const imgNumber = i.toString().padStart(3, '0');
                const img = document.createElement('img');
                img.className = 'thumbnail';
                img.src = `imgs/image-${imgNumber}.jpg`;
                img.alt = `图片 ${i}`;
                img.addEventListener('click', function() {
                    // 点击缩略图开始游戏
                    startGameWithImage(img.src);
                });
                imageContainer.appendChild(img);
            }
            
            // 开始按钮点击事件
            startBtn.addEventListener('click', function() {
                if (startBtn.textContent === '开始') {
                    // 随机选择一张图片开始游戏
                    const randomIndex = Math.floor(Math.random() * 40) + 1;
                    const imgNumber = randomIndex.toString().padStart(3, '0');
                    const imgSrc = `imgs/image-${imgNumber}.jpg`;
                    startGameWithImage(imgSrc);
                } else {
                    stopGame();
                }
            });
            
            // 全屏图片点击事件
            fullscreenImage.addEventListener('click', function() {
                if (!gameActive && gameEnded) {
                    // 如果游戏已结束，点击图片重新开始
                    startGameWithImage(currentImageSrc);
                }
            });
            
            // 全屏遮罩层点击事件
            fullscreenOverlay.addEventListener('click', function(e) {
                // 如果点击的是遮罩层本身（不是图片或其他元素）
                if (e.target === fullscreenOverlay && !gameActive && gameEnded) {
                    // 游戏已结束，点击遮罩层退出全屏
                    hideFullscreen();
                }
            });
            
            function startGameWithImage(imgSrc) {
                // 重置状态
                gameActive = true;
                gameEnded = false;
                gameResult.textContent = '';
                restartHint.textContent = '';
                exitHint.textContent = '';
                
                // 设置当前图片
                currentImageSrc = imgSrc;
                
                // 显示全屏图片
                showFullscreenImage(currentImageSrc);
                
                // 开始倒计时
                secondsLeft = 60;
                startTime = new Date();
                updateTimerDisplay();
                
                countdown = setInterval(function() {
                    secondsLeft--;
                    updateTimerDisplay();
                    
                    if (secondsLeft <= 0) {
                        stopGame();
                    }
                }, 1000);
                
                // 更新按钮状态
                startBtn.textContent = '完成';
                startBtn.id = 'stopBtn';
                usedTime.style.display = 'none';
            }
            
            function stopGame() {
                clearInterval(countdown);
                gameActive = false;
                gameEnded = true;
                
                // 计算使用时间
                const endTime = new Date();
                const timeUsed = Math.round((endTime - startTime) / 1000);
                const finalTime = Math.min(timeUsed, 60);
                
                // 显示使用时间
                usedTime.textContent = `使用时间: ${finalTime}秒`;
                usedTime.style.display = 'block';
                
                // 显示游戏结果
                gameResult.textContent = `用时 ${finalTime} 秒`;
                // restartHint.textContent = '点击图片重新开始';
                // exitHint.textContent = '点击图片外区域退出全屏';
                
                // 恢复按钮状态
                startBtn.textContent = '开始';
                startBtn.id = 'startBtn';
                timerDisplay.textContent = '60秒';
            }
            
            function updateTimerDisplay() {
                timerDisplay.textContent = `${secondsLeft}秒`;
                fullscreenTimer.textContent = `${secondsLeft}秒`;
            }
            
            function showFullscreenImage(src) {
                fullscreenImage.src = src;
                fullscreenOverlay.style.display = 'flex';
            }
            
            function hideFullscreen() {
                fullscreenOverlay.style.display = 'none';
                gameEnded = false;
            }
        });
    </script>
</body>
</html>